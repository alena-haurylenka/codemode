<!DOCTYPE html>
<html lang="en">

<head>
    <% include ../partials/head.ejs %>

    <style>
        div.matching-game {
            position:relative;
            width:500px;
            height:500px;
        }
        #rightSide {
            border-left: 1px solid black
        }
        img.smile {
            position:absolute;
        }
    </style>

    <script>
        var numberOfFaces;
        var theLeftSide;
        var theRightSide;

        function playGame() {
            numberOfFaces = 5;
            theLeftSide = document.getElementById("leftSide");
            theRightSide = document.getElementById("rightSide");

            generateFaces();
        }

        function generateFaces() {
            for (var i = 0; i < numberOfFaces; i++) {
                var img = document.createElement("img");
                img.src = "extra-face/smile.png";
                img.classList.add("smile");
                img.style.top = Math.floor(Math.random() * 400) + 'px';
                img.style.left = Math.floor(Math.random() * 400) + 'px';
                img.onclick = function nextLevel(event) {
                    //alert("Game Over!");
                    $('#gameOverAlert').show();
                    $('#gameOver').modal('show')
                    //theBody.onclick = null;
                    theLeftSide.lastChild.onclick = function nextLevel(event) {
                        $('#gameOverRightChoice').modal('show')
                    };
                };
                theLeftSide.appendChild(img);
            }

            var leftSideCopy = theLeftSide.cloneNode(true);
            leftSideCopy.removeChild(leftSideCopy.lastChild);
            while (leftSideCopy.hasChildNodes()) {
                theRightSide.appendChild(leftSideCopy.removeChild(leftSideCopy.firstChild))
            }

            theLeftSide.lastChild.onclick = function nextLevel(event) {
                event.stopPropagation();
                clearImages(theLeftSide);
                clearImages(theRightSide);
                numberOfFaces += 5;
                generateFaces();
            };
        }

        function clearImages(side) {
            while(side.firstChild) {
                side.removeChild(side.firstChild);
            }
        }

        window.onload = playGame;
    </script>
</head>

<body id="page-top">

<% include ../partials/nav_extra_face.ejs %>

<section id="game">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <h2>Matching Game</h2>
                <p>Click on the extra smiling face <b>on the left</b>.</p>
                <div id="gameOverAlert" class="alert alert-warning" role="alert" style="display: none;">
                    <span>The Gave is Over!</span>
                    <a class="text-dark pull-right" href="/extra_face" title="Restart"><i class="fa fa-refresh"></i></a>
                </div>
            </div>
        </div>
        <div class="row" style="width: 1000px">
            <div id="leftSide" class="matching-game"></div>
            <div id="rightSide" class="matching-game"></div>
        </div>
    </div>
</section>

<section id="contact">
    <div class="container">
        <div class="row">
            <!--<div class="col-lg-8 mx-auto">-->
            <div class="col-lg-12">
                <h2>Contact us</h2>
                <p class="lead">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Vero odio fugiat voluptatem dolor, provident officiis, id iusto! Obcaecati incidunt, qui nihil beatae magnam et repudiandae ipsa exercitationem, in, quo totam.</p>
            </div>
        </div>
    </div>
</section>

<section id="contact01">
    <div class="container">
        <div class="row">
            <!--<div class="col-lg-8 mx-auto">-->
            <div class="col-lg-12">
                <h2>Contact us</h2>
                <p class="lead">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Vero odio fugiat voluptatem dolor, provident officiis, id iusto! Obcaecati incidunt, qui nihil beatae magnam et repudiandae ipsa exercitationem, in, quo totam.</p>
            </div>
        </div>
    </div>
</section>
<section id="contact02">
    <div class="container">
        <div class="row">
            <!--<div class="col-lg-8 mx-auto">-->
            <div class="col-lg-12">
                <h2>Contact us</h2>
                <p class="lead">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Vero odio fugiat voluptatem dolor, provident officiis, id iusto! Obcaecati incidunt, qui nihil beatae magnam et repudiandae ipsa exercitationem, in, quo totam.</p>
            </div>
        </div>
    </div>
</section>
<section id="contact03">
    <div class="container">
        <div class="row">
            <!--<div class="col-lg-8 mx-auto">-->
            <div class="col-lg-12">
                <h2>Contact us</h2>
                <p class="lead">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Vero odio fugiat voluptatem dolor, provident officiis, id iusto! Obcaecati incidunt, qui nihil beatae magnam et repudiandae ipsa exercitationem, in, quo totam.</p>
            </div>
        </div>
    </div>
</section>
<section id="contact04">
    <div class="container">
        <div class="row">
            <!--<div class="col-lg-8 mx-auto">-->
            <div class="col-lg-12">
                <h2>Contact us</h2>
                <p class="lead">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Vero odio fugiat voluptatem dolor, provident officiis, id iusto! Obcaecati incidunt, qui nihil beatae magnam et repudiandae ipsa exercitationem, in, quo totam.</p>
            </div>
        </div>
    </div>
</section>

<!-- Modal -->
<div class="modal fade" id="gameOver" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Game Over!</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Modal -->
<div class="modal fade" id="gameOverRightChoice" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Right choice, but the game is over!</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Footer -->
<div style="min-width: 1000px;">
    <% include ../partials/footer.ejs %>
</div>

<% include ../partials/bottom_scripts.ejs %>

</body>

</html>
